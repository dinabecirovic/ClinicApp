<Window x:Class="ClinicApp.Views.AdministrationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Administracija - Fakturisanje" 
        Height="700" 
        Width="1100"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <GroupBox Header="Fakturisanje Usluga" Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Gornji red - unos fakture -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5" VerticalAlignment="Center">
                    <Label Content="Pacijent:" Margin="5,0"/>
                    <ComboBox Width="200" DisplayMemberPath="FullName"
                              ItemsSource="{Binding Patients}"
                              SelectedItem="{Binding SelectedPatient, Mode=TwoWay}"/>

                    <Label Content="Usluga:" Margin="10,0"/>
                    <TextBox Width="200" Text="{Binding InvoiceService, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                    <Label Content="Cena (RSD):" Margin="10,0"/>
                    <TextBox Width="100" Text="{Binding InvoiceAmount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                    <Button Content="Kreiraj Fakturu"
                            Command="{Binding CreateInvoiceCommand}"
                            Margin="10,0"
                            Padding="10,5"/>
                </StackPanel>

                <!-- DataGrid -->
                <DataGrid Grid.Row="1" Margin="5" ItemsSource="{Binding Invoices}" AutoGenerateColumns="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Datum" Binding="{Binding Date, StringFormat=dd.MM.yyyy}" Width="100"/>
                        <DataGridTextColumn Header="Pacijent" Binding="{Binding PatientName}" Width="*"/>
                        <DataGridTextColumn Header="Usluga" Binding="{Binding Service}" Width="*"/>
                        <DataGridTextColumn Header="Cena (RSD)" Binding="{Binding Amount}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Ukupan prihod -->
                <TextBlock Grid.Row="2" Text="{Binding TotalRevenue}" 
                           Margin="5" FontWeight="Bold" 
                           HorizontalAlignment="Right"/>
            </Grid>
        </GroupBox>
    </Grid>
</Window>
