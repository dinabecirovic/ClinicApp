<Window x:Class="ClinicApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Klinička Aplikacija" 
        Height="700" 
        Width="1000"
        WindowStartupLocation="CenterScreen"
        Loaded="Window_Loaded">

    <TabControl>

        <!-- TAB 1: PACIJENTI -->
        <TabItem Header="Pacijenti">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- DataGrid za pacijente -->
                <DataGrid x:Name="PatientsDataGrid" Grid.Row="0" Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Ime" Binding="{Binding FirstName}" Width="*"/>
                        <DataGridTextColumn Header="Prezime" Binding="{Binding LastName}" Width="*"/>
                        <DataGridTextColumn Header="Datum Rođenja" Binding="{Binding BirthDate, StringFormat=dd.MM.yyyy}" Width="120"/>
                        <DataGridTextColumn Header="Broj Kartona" Binding="{Binding RecordNumber}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Forma za dodavanje -->
                <GroupBox Grid.Row="1" Header="Dodaj Pacijenta" Margin="10" Padding="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Ime:" Width="100"/>
                            <TextBox x:Name="PatientFirstName" Width="150"/>
                            <Label Content="Prezime:" Width="100"/>
                            <TextBox x:Name="PatientLastName" Width="150"/>
                            <Label Content="Datum:" Width="80"/>
                            <DatePicker x:Name="PatientBirthDate" Width="120"/>
                            <Label Content="Broj Kartona:" Width="100"/>
                            <TextBox x:Name="PatientRecordNumber" Width="100"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Dodaj" Click="AddPatient_Click"/>
                            <Button Content="Obriši Odabranog" Click="DeletePatient_Click"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </TabItem>

        <!-- TAB 2: TERMINI -->
        <TabItem Header="Termini">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- DataGrid za termine -->
                <DataGrid x:Name="AppointmentsDataGrid" Grid.Row="0" Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Pacijent" Binding="{Binding Patient.FullName}" Width="*"/>
                        <DataGridTextColumn Header="Lekar" Binding="{Binding Doctor.FullName}" Width="*"/>
                        <DataGridTextColumn Header="Datum i Vreme" Binding="{Binding Start, StringFormat=dd.MM.yyyy HH:mm}" Width="150"/>
                        <DataGridTextColumn Header="Svrha" Binding="{Binding Purpose}" Width="*"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Forma za zakazivanje -->
                <GroupBox Grid.Row="1" Header="Zakaži Termin" Margin="10" Padding="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Pacijent:" Width="80"/>
                            <ComboBox x:Name="AppointmentPatient" Width="150" DisplayMemberPath="FullName"/>
                            <Label Content="Lekar:" Width="80"/>
                            <ComboBox x:Name="AppointmentDoctor" Width="150" DisplayMemberPath="FullName"/>
                            <Label Content="Datum:" Width="80"/>
                            <DatePicker x:Name="AppointmentDate" Width="120"/>
                            <Label Content="Svrha:" Width="80"/>
                            <TextBox x:Name="AppointmentPurpose" Width="200"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Zakaži" Click="AddAppointment_Click"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </TabItem>

        <!-- TAB 3: MEDICINSKI KARTONI -->
        <TabItem Header="Medicinski Kartoni">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Izbor pacijenta -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
                    <Label Content="Izaberite Pacijenta:"/>
                    <ComboBox x:Name="RecordPatientSelector" Width="200" DisplayMemberPath="FullName" 
                              SelectionChanged="RecordPatient_Changed"/>
                </StackPanel>

                <!-- DataGrid za kartone -->
                <DataGrid x:Name="RecordsDataGrid" Grid.Row="1" Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                        <DataGridTextColumn Header="Datum" Binding="{Binding Date, StringFormat=dd.MM.yyyy}" Width="120"/>
                        <DataGridTextColumn Header="Dijagnoza" Binding="{Binding Diagnosis}" Width="*"/>
                        <DataGridTextColumn Header="Tretman" Binding="{Binding Treatment}" Width="*"/>
                        <DataGridTextColumn Header="Napomene" Binding="{Binding Notes}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Forma za dodavanje kartona -->
                <GroupBox Grid.Row="2" Header="Dodaj Medicinski Karton" Margin="10" Padding="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Dijagnoza:" Width="100"/>
                            <TextBox x:Name="RecordDiagnosis" Width="200"/>
                            <Label Content="Tretman:" Width="100"/>
                            <TextBox x:Name="RecordTreatment" Width="200"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <Label Content="Napomene:" Width="100"/>
                            <TextBox x:Name="RecordNotes" Width="500"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Dodaj Karton" Click="AddRecord_Click"/>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </TabItem>

        <!-- TAB 4: OSOBLJE -->
        <TabItem Header="Osoblje">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Lekari -->
                <GroupBox Grid.Row="0" Header="Lekari" Margin="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <DataGrid x:Name="DoctorsDataGrid" Grid.Row="0" Margin="5">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Ime" Binding="{Binding FirstName}" Width="*"/>
                                <DataGridTextColumn Header="Prezime" Binding="{Binding LastName}" Width="*"/>
                                <DataGridTextColumn Header="Specijalnost" Binding="{Binding Specialty}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                            <Label Content="Ime:"/>
                            <TextBox x:Name="DoctorFirstName" Width="100"/>
                            <Label Content="Prezime:"/>
                            <TextBox x:Name="DoctorLastName" Width="100"/>
                            <Label Content="Specijalnost:"/>
                            <TextBox x:Name="DoctorSpecialty" Width="150"/>
                            <Button Content="Dodaj Lekara" Click="AddDoctor_Click"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>

                <!-- Sestre -->
                <GroupBox Grid.Row="1" Header="Medicinske Sestre" Margin="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <DataGrid x:Name="NursesDataGrid" Grid.Row="0" Margin="5">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Ime" Binding="{Binding FirstName}" Width="*"/>
                                <DataGridTextColumn Header="Prezime" Binding="{Binding LastName}" Width="*"/>
                                <DataGridTextColumn Header="Smena" Binding="{Binding Shift}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                            <Label Content="Ime:"/>
                            <TextBox x:Name="NurseFirstName" Width="100"/>
                            <Label Content="Prezime:"/>
                            <TextBox x:Name="NurseLastName" Width="100"/>
                            <Label Content="Smena:"/>
                            <TextBox x:Name="NurseShift" Width="150"/>
                            <Button Content="Dodaj Sestru" Click="AddNurse_Click"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>
            </Grid>
        </TabItem>
        <!-- TAB 5: ADMINISTRACIJA -->
        <TabItem Header="Administracija">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- FAKTURISANJE -->
                <GroupBox Grid.Row="0" Header="Fakturisanje Usluga" Margin="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                            <Label Content="Pacijent:"/>
                            <ComboBox x:Name="InvoicePatient" Width="200" DisplayMemberPath="FullName"/>
                            <Label Content="Usluga:"/>
                            <TextBox x:Name="InvoiceService" Width="200" Text="Pregled"/>
                            <Label Content="Cena (RSD):"/>
                            <TextBox x:Name="InvoiceAmount" Width="100" Text="3000"/>
                            <Button Content="Kreiraj Fakturu" Click="CreateInvoice_Click"/>
                        </StackPanel>

                        <DataGrid x:Name="InvoicesDataGrid" Grid.Row="1" Margin="5">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Datum" Binding="{Binding Date, StringFormat=dd.MM.yyyy}" Width="100"/>
                                <DataGridTextColumn Header="Pacijent" Binding="{Binding PatientName}" Width="*"/>
                                <DataGridTextColumn Header="Usluga" Binding="{Binding Service}" Width="*"/>
                                <DataGridTextColumn Header="Cena (RSD)" Binding="{Binding Amount}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <TextBlock Grid.Row="2" x:Name="TotalRevenue" Margin="5" FontWeight="Bold" HorizontalAlignment="Right"/>
                    </Grid>
                </GroupBox>

                <!-- IZVEŠTAJI -->
                <GroupBox Grid.Row="1" Header="Izveštaji" Margin="10">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="10">
                            <Button Content="Broj Pacijenata" Width="150" Click="ReportPatients_Click" Margin="5"/>
                            <Button Content="Broj Termina" Width="150" Click="ReportAppointments_Click" Margin="5"/>
                            <Button Content="Prihod Danas" Width="150" Click="ReportRevenue_Click" Margin="5"/>
                        </StackPanel>

                        <Border BorderThickness="1" BorderBrush="Gray" Margin="10" Padding="10" MinHeight="200">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <TextBlock x:Name="ReportOutput" TextWrapping="Wrap" FontFamily="Courier New"/>
                            </ScrollViewer>
                        </Border>
                    </StackPanel>
                </GroupBox>
            </Grid>
        </TabItem>

    </TabControl>
</Window>